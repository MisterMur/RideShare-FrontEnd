(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,r){},301:function(e,t,r){e.exports=r(490)},306:function(e,t,r){},490:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(15),l=r.n(s),o=(r(306),r(17)),i=r(18),c=r(21),u=r(19),p=r(22),d=r(36),m=r(30),f=r(541),h=r(29),g=r(255),E=r(535),b=r(537),v=r(32),C=(r(254),"https://ride-share-api.herokuapp.com/api/v1/"),y=C+"users/",w=C+"companies/",U=C+"rides/",O=C+"friendships/",j=C+"forums/",F=C+"login/",N=C+"auto_login/",S=C+"messages/",k="ADD_USER",_="LOGIN_USER",R="LOGOUT_USER",x="REMOVE_FOLLOWER",L="ADD_FOLLOWER",P="ADD_FOLLOWING",A="REMOVE_FOLLOWING",T="FETCH_ALL_RIDES",M="ADD_RIDE",D="FETCH_ALL_FORUMS",V="FETCH_ALL_USERS",I="FETCH_ALL_COMAPNIES",B="FETCH_CURRENT_USER",H="FETCH_ALL_FORUM_MESSAGES",W="SET_USER",z="FETCH_ALL_FRIENDSHIPS",G="REMOVE_FRIENDSHIP",J="ADD_FRIENDSHIP",q="SET_ALL_FOLLOWING",X="ADD_FORUM_MESSAGE",Y="RESET_MESSAGES";function $(e){return{type:_,payload:e}}function K(e){return function(t){t({type:B}),fetch("".concat(y,"/").concat(e.id)).then(function(e){return e.json()}).then(function(e){t($(e))})}}function Q(){return function(e){e({type:V}),fetch(y).then(pe).then(function(e){return e.json()}).then(function(t){e({type:V,payload:t})})}}function Z(e){return function(t){fetch(y+e.id).then(function(e){return e.json()}).then(function(e){t({type:W,payload:e})})}}function ee(){return function(e){e({type:I}),fetch(w).then(function(e){return e.json()}).then(function(t){e({type:I,payload:t})})}}function te(){return function(e){fetch(U).then(function(e){return e.json()}).then(function(t){e({type:T,payload:t})})}}function re(e){return function(t){fetch(j+e.id).then(function(e){return e.json()}).then(function(e){var r;t((r=e.messages,{type:H,payload:r}))})}}function ne(){return function(e){fetch(j).then(function(e){return e.json()}).then(function(t){e({type:D,payload:t})})}}function ae(e){return function(t){fetch(y+e.id+"/following").then(function(e){return e.json()}).then(function(e){t({type:q,payload:e})})}}function se(){return function(e){fetch(O).then(function(e){return e.json()}).then(function(t){e({type:z,payload:t})})}}function le(e){return function(t){return fetch(U,{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify({ride:e})}).then(pe).then(function(e){return e.json()}).then(function(e){return t({type:M,payload:e})})}}function oe(e,t,r){return function(n){return fetch(S,{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify({user_id:e.id,forum_id:r.id,content:t})}).then(pe).then(function(e){return e.json()}).then(function(e){return n({type:X,payload:e})})}}function ie(e,t){return function(r){var n={follower_id:e.id,followed_id:t.id};return fetch(O,{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(n)}).then(pe).then(function(){r({type:P,payload:t}),r(function(e){return{type:J,payload:e}}(n))})}}function ce(e,t,r){return function(n){var a=r.find(function(r){return r.follower_id===e.id&&r.followed_id===t.id});if(a)return fetch(O+a.id,{method:"DELETE",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(a)}).then(pe).then(function(){n({type:A,payload:t}),n(function(e){return{type:G,payload:e}}(a))})}}function ue(){return function(e){e({type:R}),localStorage.removeItem("jwt"),e({type:R})}}function pe(e){if(!e.ok)throw Error(e.statusText);return e}var de=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).closeNav=function(){r.setState({navExpanded:!1})},r.setNavExpanded=function(e){r.setState({navExpanded:e})},r.logout=function(){localStorage.removeItem("jwt"),r.props.setLogout()},r.renderProfileLink=function(){return r.props.currentUser?a.a.createElement(v.b,{to:"/profile"}," Profile "):a.a.createElement(v.b,{to:"/login"}," Profile ")},r.renderLogout=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.a,{onClick:function(){return r.props.history.push("/users/".concat(r.props.currentUser.id))}}),a.a.createElement(g.a,{className:"menu-item"},a.a.createElement(v.b,{to:"/login",onClick:r.logout},"Logout")))},r.renderLoginSignup=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.a,{onClick:r.closeNav,className:"menu-item"},a.a.createElement(v.b,{to:"/login"},"Login")),a.a.createElement(g.a,{onClick:r.closeNav,className:"menu-item"},a.a.createElement(v.b,{to:"/signup"},"Sign Up")))},r.renderNav=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{bg:"dark",expand:"md",fixedtop:"true",ref:function(e){return r._navbar=e},onToggle:r.setNavExpanded,expanded:r.state.navExpanded,inverse:"true",fluid:"true"},a.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),a.a.createElement(E.a.Collapse,{id:"basic-navbar-nav"},a.a.createElement(b.a,null,a.a.createElement(g.a,{onClick:r.closeNav,"data-bs-toggle":"collapse",className:"menu-item"},r.renderProfileLink()),a.a.createElement(g.a,{onClick:r.closeNav,"data-bs-toggle":"collapse",className:"menu-item"},a.a.createElement(v.b,{to:"/rides"}," Rides ")),a.a.createElement(g.a,{onClick:r.closeNav,"data-bs-toggle":"collapse",className:"menu-item"},a.a.createElement(v.b,{to:"/forums"}," Forums ")),a.a.createElement(g.a,{onClick:r.closeNav,"data-bs-toggle":"collapse",className:"menu-item"},a.a.createElement(v.b,{to:"/discover"}," Discover ")),r.props.currentUser?r.renderLogout():r.renderLoginSignup()))))},r.renderHeader=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"title"},a.a.createElement("div",{className:"container col-11"},a.a.createElement("b",null,"RideShare"))))},r.state={navHeight:50,navExpanded:!1},r.handleResize=r.handleResize.bind(Object(h.a)(Object(h.a)(r))),r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleResize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({navHeight:l.a.findDOMNode(this._navbar).offsetHeight})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"header"},this.renderHeader(),this.renderNav()))}}]),t}(a.a.Component);var me=Object(m.b)(function(e){return{currentUser:e.user.currentUser}},function(e){return{setLogout:function(){return e(ue())}}})(de),fe=r(42),he=r(54),ge=r(28),Ee=r(532),be=function(e){var t=function(e){};return a.a.createElement("div",{className:"profile-card"},a.a.createElement("img",{src:e.user.image_url,alt:"No Profile",className:"card-img-top"}),a.a.createElement("div",{className:"card-header"},a.a.createElement("b",null,e.user.name," ")),a.a.createElement("ul",{className:"list-group list-group-flush"},a.a.createElement("li",{onMouseOver:t,className:"list-group-item"},"Car: ",e.user.car," "),a.a.createElement("li",{onMouseOver:t,className:"list-group-item"},"Experience: ",e.user.experience," "),a.a.createElement("li",{onMouseOver:t,className:"list-group-item"},"Rating: ",e.user.rating," "),a.a.createElement("li",{onMouseOver:t,className:"list-group-item"},"Companies: ",e.companies?e.companies.map(function(e){return"".concat(e.name," ")}):"nope"," "),a.a.createElement("li",{onMouseOver:t,className:"list-group-item"},"Base Location: ",e.user.location)))},ve=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).formatDate=function(e){var t=e.slice(0,4),r=e.slice(5,7),n=e.slice(8,10),a=e.slice(11,13),s=e.slice(14,16),l="";return l=parseInt(a)<12?"AM":"PM",a>=12&&(a-=12),a<10&&(a=parseInt(a)),0===a&&(a=12),"".concat(r,"/").concat(n,"/").concat(t,"@").concat(a,":").concat(s).concat(l)},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement(n.Fragment,null,a.a.createElement("tr",null,a.a.createElement("th",{scope:"row"},this.props.idx),a.a.createElement("td",null,this.props.ride.distance),a.a.createElement("td",null,this.formatDate(this.props.ride.started_at)),a.a.createElement("td",null,this.formatDate(this.props.ride.end_at)),a.a.createElement("td",null,this.props.ride.price),a.a.createElement("td",null,this.props.ride.start_location),a.a.createElement("td",null,this.props.ride.end_location)))}}]),t}(a.a.Component),Ce=function(e){return a.a.createElement("div",{className:"ridestable"},e.displayDropdown?e.displayDropdown():"",a.a.createElement("table",{className:"table table-striped"},a.a.createElement("thead",{className:"thead-dark"},a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Num"),a.a.createElement("th",{scope:"col"},"Distance"),a.a.createElement("th",{scope:"col"},"Started At"),a.a.createElement("th",{scope:"col"},"Ended At"),a.a.createElement("th",{scope:"col"},"Price"),a.a.createElement("th",{scope:"col"},"Starting Location"),a.a.createElement("th",{scope:"col"},"Ending Location"))),a.a.createElement("tbody",null,e.displayAddRide?e.displayAddRide():null,e.rides.length>0?e.rides.map(function(e,t){return a.a.createElement(ve,{key:t,idx:t+1,ride:e})}):a.a.createElement(a.a.Fragment,null,a.a.createElement("tr",null,a.a.createElement("td",{colspan:"7"},"No completed rides yet"))))))},ye=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(n.Fragment,null,a.a.createElement("tr",{onClick:function(t,r){return e.props.handleForumClick(t,e.props.forum.topic)}},a.a.createElement("td",null,"  ",this.props.forum.topic," ")))}}]),t}(a.a.Component),we=function(e){return a.a.createElement("div",{className:"forumstable"},a.a.createElement("table",{className:"table table-striped"},a.a.createElement("thead",{className:"thead-dark"},a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Forum Topic"))),a.a.createElement("tbody",null,function(){return e.forums.length>0?(t=e.forums,t.filter(function(e,r){return t.findIndex(function(t){return t.topic===e.topic})===r})).map(function(t,r){return a.a.createElement(ye,{handleForumClick:e.handleForumClick,key:t.id,idx:r+1,forum:t})}):a.a.createElement(a.a.Fragment,null,a.a.createElement("tr",null,a.a.createElement("td",{colspan:"1"},a.a.createElement("p",{style:{align:"center",justify:"centered"}},"Not a member of any Forums"))));var t}())))},Ue=r(258),Oe=r.n(Ue),je=r(170),Fe=r.n(je),Ne=r(534),Se=r(533),ke=r(536),_e=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={nameValue:r.props.props.user.name,experienceValue:r.props.props.user.experience,ratingValue:r.props.props.user.rating,locationValue:r.props.props.user.location,carValue:r.props.props.user.car,userCompanies:r.props.currentUser.companies,companiesValue:[],options:[],selectedFile:[]},r.handleCheckBox=function(e){r.state.userCompanies&&r.state.allCompanies&&r.state.allCompanies.map(function(e){return r.state.userCompanies.find(e)})},r.fileUploadHandler=function(e){if(e.preventDefault(),r.state.selectedFile){var t=new FormData;t.append("image",r.state.selectedFile,r.state.selectedFile.name),Fe.a.post(y+r.props.currentUser.id+"/imageupload",t).then(function(e){r.props.fetchCurrentUser(e.data)})}},r.fileSelectedHandler=function(e){if(r.setState({selectedFile:e.target.files[0]}),e.target.files[0]){var t=new FormData;t.append("image",e.target.files[0],e.target.files[0].name),Fe.a.post(y+r.props.currentUser.id+"/imageupload",t).then(function(e){r.props.fetchCurrentUser(e.data)})}},r.onChange=function(e,t){var n=r.state.options;e.target.checked?n.push(t):n.pop(t),r.setState({options:n})},r.renderCheckBoxes=function(){if(r.props.companiesValue){var e=r.state.options.map(function(e){return e.id});return r.props.companiesValue.map(function(t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",null,t.name,a.a.createElement(ke.a,{label:t.name,checked:e.includes(t.id),onChange:function(e){return r.onChange(e,t)}})))})}},r.handleEditFormChange=function(e){var t=e.target.value,n=e.target.name;r.setState(Object(he.a)({},n,t))},r.renderEditModal=function(){if(r.props.state.modal)return a.a.createElement("div",null,a.a.createElement(Oe.a,{id:"editmodal",isOpen:r.props.state.modal,onAfterOpen:r.props.handleAfterOpen,onRequestClose:r.props.handleAfterClose,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,ariaHideApp:!1,data:{background:"green"},contentLabel:"example modal"},a.a.createElement("br",null),a.a.createElement(Ne.a,null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"control"},a.a.createElement("input",{type:"file",name:"file",id:"file",className:"inputfile",onChange:r.fileSelectedHandler}),a.a.createElement("label",{for:"file",className:"btn-2"},"Upload Profile Picture")),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement("label",null,a.a.createElement("h4",null,"Companies:")),a.a.createElement("br",null),r.renderCheckBoxes())),a.a.createElement("div",{className:"col-8"},a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"nameValue",label:"Name",value:r.state.nameValue,onChange:function(e){return r.handleEditFormChange(e)},style:{width:"50%"}})),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"experienceValue",type:"number",label:"Experience",value:r.state.experienceValue,onChange:function(e){return r.handleEditFormChange(e)},style:{width:"50%"}})),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"ratingValue",type:"number",label:"Rating",value:r.state.ratingValue,onChange:function(e){return r.handleEditFormChange(e)},style:{width:"50%"}})),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"carValue",type:"text",label:"Car",value:r.state.carValue,onChange:function(e){return r.handleEditFormChange(e)},style:{width:"50%"}})),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"locationValue",type:"text",label:"Base Location",value:r.state.locationValue,onChange:function(e){return r.handleEditFormChange(e)},style:{width:"50%"}})),a.a.createElement("br",null))),a.a.createElement("button",{className:"btn-primary savebutton",type:"submit",onClick:function(e,t){return r.props.handleSubmit(e,r.state)}},"Save"))))},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({nameValue:this.props.currentUser.name,experienceValue:this.props.currentUser.experience,ratingValue:this.props.currentUser.rating,locationValue:this.props.currentUser.location,carValue:this.props.currentUser.car,companiesValue:this.props.companiesValue,allCompanies:this.props.companiesValue,userCompanies:this.props.currentUser.companies})}},{key:"render",value:function(){return a.a.createElement(n.Fragment,null,this.renderEditModal())}}]),t}(a.a.Component),Re=Object(m.b)(null,function(e){return{fetchCurrentUser:function(t){return e(K(t))}}})(_e),xe=r(540),Le=(r(158),r(96)),Pe=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).getProfileLink=function(){return r.props.currentUser&&r.props.follower.id===r.props.currentUser.id?"/profile":"/user/".concat(r.props.follower.id)},r.renderFollowCard=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"follower-card",onClick:function(e,t){return r.props.handleUserClick(e,r.props.follower)}},a.a.createElement(v.b,{to:r.getProfileLink()},a.a.createElement(Le.FlippingCard,{style:{height:"100%",width:"100%"}},a.a.createElement(Le.FlippingCardFront,null,a.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"contain",backgroundPosition:"center"}},a.a.createElement(Le.UserCard,{float:!0,header:"https://loremflickr.com/320/240/car",avatar:"https://ptetutorials.com/images/user-profile.png",name:r.props.follower.name,positionName:r.props.follower.car,stats:[{name:"Car",value:r.props.follower.car}]}))),a.a.createElement(Le.FlippingCardBack,null,a.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"contain",backgroundPosition:"center"}},a.a.createElement(Le.ProductCard,{photos:[r.props.follower.image_url],price:r.props.follower.ratingValue,productName:r.props.follower.name,description:"Click to View Profile",rating:r.props.follower.ratingValue})))))))},r.renderCard=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(xe.a,{className:"card mb-4 border-0",id:"following-card"},a.a.createElement(xe.a.Img,{variant:"top",className:"followercardimg",src:r.props.follower.image_url}),a.a.createElement(xe.a.Body,null,a.a.createElement(xe.a.Title,null,"Name: ",r.props.follower.name),a.a.createElement(xe.a.Text,null,"I drive a: ",r.props.follower.car),a.a.createElement("div",{onClick:function(e,t){return r.props.handleUserClick(e,r.props.follower)}},a.a.createElement(v.b,{to:"/user/".concat(r.props.follower.id)},a.a.createElement(Ee.a,{type:"button",className:"btn btn-primary"},"Check out my profile!"))))))},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"card-container"},this.renderFollowCard())}}]),t}(a.a.Component);var Ae=Object(m.b)(function(e){return{currentUser:e.user.currentUser}})(Pe),Te=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).handleUserClick=function(e,t){return a.a.createElement(He,Object.assign({},r.props,{user:r.props.user}))},r.followerCards=function(){if(r.props.followers)return r.props.followers.map(function(e,t){return a.a.createElement("div",{key:t,className:"card-rows"},a.a.createElement(Ae,{handleUserClick:r.handleUserClick,key:t,follower:e}))})},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"card-group col-12"},this.followerCards())}}]),t}(n.Component);var Me=Object(m.b)(function(e){return{currentUser:e.user.currentUser}})(Te),De=function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"authBox"},a.a.createElement("h1",{className:"headerText"},"Must be Logged in To View"),a.a.createElement("br",null),a.a.createElement(v.b,{to:"/login",id:"authbutton",color:"teal"},"Click here to navigate to the login page")))},Ve=r(175),Ie=function(e){var t=e.progress;return a.a.createElement("span",{className:"progress-bar"},a.a.createElement("span",{className:"progress-bar__inner",style:{transform:"scaleX(".concat(t,")")}}))},Be=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleEdit=function(e){r.setState({modal:!0})},r.handleAfterOpen=function(){},r.handleAfterClose=function(){r.setState({modal:!1})},r.handleSubmit=function(e,t){e.preventDefault(),r.patchEditProfile(e,t),r.setState({modal:!1})},r.handleDelete=function(e){},r.handleForumClick=function(e){r.setState({clickedForum:e.target.id}),r.setState({openChat:!0})},r.renderModal=function(){if(r.props.user)return a.a.createElement(Re,{state:r.state,props:r.props,companiesValue:r.props.allCompanies,currentUser:r.props.currentUser,handleAfterOpen:r.handleAfterOpen,handleAfterClose:r.handleAfterClose,handleEditFormChange:r.handleEditFormChange,handleSubmit:r.handleSubmit})},r.patchEditProfile=function(e,t){e.preventDefault(),r.props.currentUser&&(t.id=r.props.currentUser.id,fetch("".concat(y,"/").concat(r.props.currentUser.id),{headers:{accepts:"application/json","content-type":"application/json"},method:"PATCH",body:JSON.stringify({id:t.id,name:t.nameValue,experience:t.experienceValue,car:t.carValue,companies:t.options,location:t.locationValue,rating:t.ratingValue})}).then(function(e){return e.json()}).then(function(e){r.setState({modal:!1},r.props.fetchCurrentUser(e.user))}))},r.handleFollow=function(){r.props.postNewFriendship(r.props.currentUser,r.props.user),Object.assign({},r.props.currentUser).following.includes(r.props.user)||r.setState(function(e){return{isFollowing:!e.isFollowing}})},r.handleUnFollow=function(){r.props.fetchFriendships(),r.props.unfollow(r.props.currentUser,r.props.user,r.props.friendships),r.setState(function(e){return{isFollowing:!e.isFollowing}})},r.renderProfileCard=function(){if(r.state.user)return a.a.createElement(be,{user:r.state.user,companies:r.state.user.companies})},r.renderEditButton=function(){return r.props.user===r.props.currentUser?a.a.createElement("div",null,a.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModalCenter",id:"edit-profile",onClick:r.handleEdit}," Edit Profile ")):a.a.createElement(a.a.Fragment,null,r.renderFollowButton())},r.renderFollowButton=function(){return!1===r.state.isFollowing?a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee.a,{className:"btn btn-primary",id:"follow-user",onClick:function(){return r.handleFollow()}}," Follow this user ")):r.state.isFollowing?a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee.a,{className:"btn btn-primary",id:"follow-user",onClick:function(){return r.handleUnFollow()}}," Unfollow this user ")):void 0},r.renderUserRides=function(){return a.a.createElement(a.a.Fragment,null,r.props.userProfile?a.a.createElement(Ce,{displayAddRide:r.displayAddRide,rides:r.props.userProfile.rides}):null)},r.renderUserForums=function(){return a.a.createElement(a.a.Fragment,null,r.state.user.forums?a.a.createElement(we,{forums:r.state.user.forums,handleForumClick:r.handleForumClick}):a.a.createElement("div",null,a.a.createElement("table",{className:"table table-striped"},a.a.createElement("thead",{className:"thead-dark"},a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Num"),a.a.createElement("th",{scope:"col"},"Forum Topics"))),a.a.createElement("tbody",null))))},r.handleAddRideChange=function(e){r.setState({ride:Object(ge.a)({},r.state.ride,Object(he.a)({},e.target.name,e.target.value))})},r.handleAddRide=function(e){r.state.ride.company_id&&r.state.ride.user_id&&r.state.ride.distance&&r.state.ride.price&&r.state.ride.start_location&&r.state.ride.end_location&&r.state.ride.started_at&&r.state.ride.end_at?(r.state.ride.company_id=parseInt(r.state.ride.company_id),r.props.postNewRide(r.state.ride),r.setState({ride:Object(ge.a)({},r.state.ride,{distance:"",price:"",start_location:"",end_location:"",started_at:"",end_at:""})})):alert("Please enter all fields before adding a new ride!")},r.renderAllCompanySelect=function(){if(r.props.allCompanies)return r.props.allCompanies.map(function(e,t){return a.a.createElement("option",{key:t,value:e.id}," ",e.name," ")})},r.displayAddRide=function(){if(r.props.user===r.props.currentUser)return a.a.createElement(a.a.Fragment,null,a.a.createElement(n.Fragment,null,a.a.createElement("tr",null,a.a.createElement("td",{colspan:"7"},a.a.createElement("button",{className:"btn btn-primary",id:"addridebutton",onClick:r.handleAddRide},"Add Ride"))),a.a.createElement("tr",null,a.a.createElement("th",{scope:"row"},a.a.createElement("select",{className:"addrideinput",value:r.state.ride.company_id,name:"company_id",onChange:r.handleAddRideChange},r.renderAllCompanySelect())),a.a.createElement("td",null,a.a.createElement("input",{className:"addrideinput",type:"number",name:"distance",placeholder:"Distance",value:r.state.ride.distance,onChange:r.handleAddRideChange})),a.a.createElement("td",null,a.a.createElement("input",{className:"addrideinput",type:"datetime-local",name:"started_at",value:r.state.ride.started_at,onChange:r.handleAddRideChange})),a.a.createElement("td",null,a.a.createElement("input",{className:"addrideinput",type:"datetime-local",name:"end_at",value:r.state.ride.end_at,onChange:r.handleAddRideChange})),a.a.createElement("td",null,a.a.createElement("input",{className:"addrideinput",type:"number",placeholder:"Price",name:"price",value:r.state.ride.price,onChange:r.handleAddRideChange})),a.a.createElement("td",null,a.a.createElement("input",{className:"addrideinput",type:"text",name:"start_location",placeholder:"Starting Location",value:r.state.ride.start_location,onChange:r.handleAddRideChange})),a.a.createElement("td",null,a.a.createElement("input",{className:"addrideinput",type:"text",name:"end_location",placeholder:"Ending Location",value:r.state.ride.end_location,onChange:r.handleAddRideChange})))))},r.renderFollowerFollowingBox=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"col",id:"profile-following"},r.props.userProfile?a.a.createElement(a.a.Fragment,null,a.a.createElement(Ve.a,{duration:800,collapsed:!0,whenReversedUseBackwardEase:!0,render:function(e){var t=e.toggle,n=e.progress,s=e.setCollapsibleElement;e.range,e.toggleState;return a.a.createElement("div",{className:"slide-toggle"},a.a.createElement("div",{className:"slide-toggle__header"},a.a.createElement("button",{id:"followingbutton",className:"slide-toggle__toggle",onClick:t},r.props.userProfile.following.length," Following"),a.a.createElement(Ie,{progress:n})),a.a.createElement("div",{className:"slide-toggle__box",ref:s},a.a.createElement("div",{className:"slide-toggle__box-inner"},a.a.createElement(Me,{followers:r.props.userProfile.following}),a.a.createElement("button",{id:"followingbutton",onClick:t},"Hide Following"))))}})):null,r.props.userProfile?a.a.createElement(a.a.Fragment,null,a.a.createElement(Ve.a,{duration:800,collapsed:!0,whenReversedUseBackwardEase:!0,render:function(e){var t=e.toggle,n=e.progress,s=e.setCollapsibleElement;e.range,e.toggleState;return a.a.createElement("div",{className:"slide-toggle"},a.a.createElement("div",{className:"slide-toggle__header"},a.a.createElement("button",{id:"followingbutton",className:"slide-toggle__toggle",onClick:t},r.props.userProfile.followers.length," Followers"),a.a.createElement(Ie,{progress:n})),a.a.createElement("div",{className:"slide-toggle__box",ref:s},a.a.createElement("div",{className:"slide-toggle__box-inner"},a.a.createElement(Me,{followers:r.props.userProfile.followers}),a.a.createElement("button",{id:"followingbutton",onClick:t},"Hide Followers"))))}})):null))},r.renderPage=function(){return a.a.createElement(n.Fragment,null,a.a.createElement("div",{className:"container col-12"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col justify-content-center",id:"profile-card-container"},r.renderProfileCard(),r.renderEditButton(),r.renderModal()),a.a.createElement("div",{className:"col-10",id:"profile-rides-list"},r.renderUserForums(),r.renderUserRides())),r.renderFollowerFollowingBox()))},r.state={modal:!1,user:r.props.user,editedUser:r.props.user,clickedForum:null,openChat:!1,isCurrentUserProfile:null,isFollowing:null,currentUser:r.props.currentUser,ride:{started_at:"",end_at:"",price:"",distance:"",start_location:"",end_location:"",user_id:r.props.currentUser.id,company_id:21}},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCompanies(),this.props.fetchFriendships()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.user===e.currentUser)this.setState({isCurrentUserProfile:!0,user:e.currentUser});else{var t=null;e.currentUser.following&&(t=e.currentUser.following),t.find(function(t){return t.id===e.user.id})?this.setState({isCurrentUserProfile:e.isCurrentUserProfile,user:e.user,isFollowing:!0}):this.setState({isCurrentUserProfile:e.isCurrentUserProfile,user:e.user,isFollowing:!1})}}},{key:"render",value:function(){return a.a.createElement("div",{className:"profilepage"},this.props.currentUser?this.renderPage():a.a.createElement(De,null))}}]),t}(a.a.Component);var He=Object(m.b)(function(e){var t=e.user,r=e.forums;return{allCompanies:t.allCompanies,rides:t.rides,forums:r.forums[0],allForums:t.forums,users:t.users,currentUser:t.currentUser,following:t.following,friendships:t.friendships,userProfile:t.userProfile}},function(e){return{fetchUser:function(t){return e(Z(t))},fetchCompanies:function(){return e(ee())},patchEditProfile:function(t){return e((r=t,function(e){var t=this.state.currentUser.id;fetch("".concat(y,"/").concat(t),{headers:{accepts:"application/json","content-type":"application/json"},method:"PATCH",body:JSON.stringify({name:r.nameValue,experience:r.experienceValue,car:r.carValue,companies:r.companiesValue,location:r.locationValue,rating:r.ratingValue})}).then(pe).then(function(t){e(Q())})}));var r},postNewFriendship:function(t,r){return e(ie(t,r))},unfollow:function(t,r,n){return e(ce(t,r,n))},fetchCurrentUser:function(t){return e(K(t))},fetchFriendships:function(){return e(se())},fetchFollowing:function(t){return e(ae(t))},postNewRide:function(t){return e(le(t))}}})(Be),We=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.getUser?a.a.createElement("div",{onClick:function(t){return e.props.handleClick(t,e.props.getUser)},name:this.props.superlative},a.a.createElement(v.b,{to:"/user/".concat(this.props.getUser.id)},a.a.createElement("div",{className:this.props.design},a.a.createElement("h3",{className:"pull-right"},a.a.createElement("i",{className:this.props.icon}," ")),a.a.createElement("h4",{className:"list-group-item-heading count"},this.props.title,this.props.getUser.name),a.a.createElement("p",{className:"list-group-item-text"},this.props.getStat?this.props.getStat(this.props.getUser):null,"rating"===this.props.superlative?this.props.getUser.rating:null,"experience"===this.props.superlative?this.props.getUser.experience:null)))):a.a.createElement("h4",null,"YOU ARE NOT LOGGED IN")}}]),t}(a.a.Component),ze=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).getTotalMiles=function(e){var t=0;if(e.rides)return e.rides.map(function(e){return t+=e.distance}),t},r.getTotalEarned=function(e){var t=0;if(e.rides)return e.rides.map(function(e){return t+=e.price}),t},r.getTotalTimeDriving=function(e){var t=0;if(e.rides)return e.rides.map(function(e){var r=e.end_at-e.started_at;return t+=r}),t},r.getMileLeader=function(e){var t=Object(fe.a)(e);if(t!==[])return t.sort(function(e,t){return r.getTotalMiles(e)-r.getTotalMiles(t)}),t.reverse()[0]},r.getRatingLeader=function(e){var t=Object(fe.a)(e);return t!==[]&&t.sort(function(e,t){return e.rating-t.rating}),t.reverse()[0]},r.getExperienceLeader=function(e){var t=Object(fe.a)(e);return t!==[]&&t.sort(function(e,t){return e.experience-t.experience}),t.reverse()[0]},r.getTimeLeader=function(e){if(e!==[])return e.sort(function(e,t){return r.getTimeLeader(e)-r.getTimeLeader(t)})},r.getEarnerLeader=function(e){var t=Object(fe.a)(e);if(t!==[])return t.sort(function(e,t){return r.getTotalEarned(e)-r.getTotalEarned(t)}),t.reverse()[0]},r.renderUserTotals=function(){if(r.props.leaders)return r.props.leaders.map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("h1",null,"User:",e.name),a.a.createElement("p",null,"Miles: ",r.getTotalMiles(e)),a.a.createElement("p",null,"Total Earned:",r.getTotalEarned(e)),a.a.createElement("p",null,"Total Time:",r.getTotalTimeDriving(e)))})},r.handleUserClick=function(e,t){return!t===r.props.currentUser?a.a.createElement(He,{user:t,rides:r.props.rides,forum:r.props.forums,isCurrentUserProfile:!1,currentUser:r.props.currentUser,allCompanies:r.props.allCompanies}):a.a.createElement(He,{user:t,rides:r.props.rides,forum:r.props.forums,isCurrentUserProfile:!0,currentUser:r.props.currentUser,allCompanies:r.props.allCompanies})},r.renderLeaderBoard=function(){if(r.props.leaders)return a.a.createElement(n.Fragment,null,a.a.createElement("div",{id:"leaderboard col-12"},a.a.createElement("div",{className:"list-group"},a.a.createElement(We,{title:"Highest Rating: ",design:"list-group-item google-plus",icon:"icon glyphicon glyphicon-star",getUser:r.getRatingLeader(r.props.leaders),handleClick:r.handleUserClick,superlative:"rating"}),a.a.createElement(We,{title:"Most Miles: ",design:"list-group-item twitter",icon:"icon glyphicon glyphicon-road",getUser:r.getMileLeader(r.props.leaders),handleClick:r.handleUserClick,getStat:r.getTotalMiles}),a.a.createElement(We,{title:"Highest Earner: ",design:"list-group-item youtube",icon:"icon glyphicon glyphicon-usd",getUser:r.getEarnerLeader(r.props.leaders),handleClick:r.handleUserClick,superlative:"money",getStat:r.getTotalEarned}),a.a.createElement(We,{title:"Most Experience: ",design:"list-group-item tumblr",icon:"icon glyphicon glyphicon-hourglass",getUser:r.getExperienceLeader(r.props.leaders),handleClick:r.handleUserClick,superlative:"experience"}))))},r.state={mostMiles:"",mostRating:"",mostEarned:"",mostTime:"",mostExperience:""},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getRatingLeader(e.leaders),r=this.getMileLeader(e.leaders),n=this.getEarnerLeader(e.leaders),a=this.getExperienceLeader(e.leaders);this.setState({mostMiles:r,mostRating:t,mostEarned:n,mostExperience:a})}},{key:"render",value:function(){return a.a.createElement("div",null,this.renderLeaderBoard())}}]),t}(a.a.Component);var Ge=Object(m.b)(function(e){var t=e.user,r=e.rides.rides;return{allCompanies:t.allCompanies,rides:r[0],users:t.users[2],currentUser:t.currentUser}},function(e){return{fetchRides:function(){return e(te())},fetchUsers:function(){return e(Q())}}})(ze),Je=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={allRides:r.props.rides,filteredRides:r.props.rides,users:[],textInput:""},r.returnDropdown=function(){return a.a.createElement("div",{className:""},a.a.createElement("form",{action:"/action_page.php"},a.a.createElement("select",{name:"cars",onChange:r.handleSortSubmit},a.a.createElement("option",{value:"recent"},"Most Recent"),a.a.createElement("option",{value:"price"},"Price"),a.a.createElement("option",{value:"distance"},"Distance")),a.a.createElement("select",{name:"cars",onChange:r.handleFilterSubmit},a.a.createElement("option",{value:"all"},"All"),a.a.createElement("option",{value:"uber"},"Uber"),a.a.createElement("option",{value:"lyft"},"Lyft")),a.a.createElement("input",{type:"text",onChange:r.handleSearch,value:r.state.textInput,placeholder:"Search by location"}),a.a.createElement("form",{action:"/action_page.php"},a.a.createElement("input",{type:"radio",name:"gender",value:"friends",onChange:function(e){return r.handleFriendFilter(e)}})," Friends",a.a.createElement("input",{type:"radio",name:"gender",value:"all",onChange:r.handleChangeBack})," All")))},r.handleChangeBack=function(){r.setState({filteredRides:r.state.allRides})},r.handleFriendFilter=function(e){if(r.props.currentUser){e.preventDefault();var t=r.props.currentUser.followers.map(function(e){return e.id}),n=[];r.state.allRides.map(function(e){for(var r=0;r<t.length;r++)if(e.user_id===t[r])return n.push(e)}),r.setState({filteredRides:n})}},r.handleSearch=function(e){r.setState({textInput:e.target.value});var t=r.state.allRides.filter(function(t){return t.start_location.toLowerCase().includes(e.target.value.toLowerCase())||t.end_location.toLowerCase().includes(e.target.value.toLowerCase())});r.setState({filteredRides:t})},r.handleSortSubmit=function(e){if(e.preventDefault(),"distance"===e.target.value){var t=r.state.filteredRides.sort(function(e,t){return e.distance<t.distance?1:-1});r.setState({filteredRides:t})}else if("price"===e.target.value){var n=r.state.filteredRides.sort(function(e,t){return e.price<t.price?1:-1});r.setState({filteredRides:n})}else if("recent"===e.target.value){var a=r.state.filteredRides.sort(function(e,t){return e.end_at>t.end_at?1:-1});r.setState({filteredRides:a})}},r.handleFilterSubmit=function(e){if(e.preventDefault(),"all"===e.target.value)r.setState({filteredRides:r.state.allRides});else if("uber"===e.target.value){var t=r.state.allRides.filter(function(e){return 1===e.company_id});r.setState({filteredRides:t})}else if("lyft"===e.target.value){var n=r.state.allRides.filter(function(e){return 2===e.company_id});r.setState({filteredRides:n})}},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchRides(),this.props.fetchUsers()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this.setState({users:this.props.users,allRides:this.props.rides,filteredRides:this.props.rides})}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"container col-11",id:"rides-page"},this.props.users?a.a.createElement(Ge,{leaders:this.props.users,allUsers:this.props.users,user:this.props.currentUser,forum:this.props.forums,rides:this.props.rides,allCompanies:this.props.allCompanies}):a.a.createElement("h4",null,"LOADING"),a.a.createElement(Ce,{rides:this.state.filteredRides,displayDropdown:this.returnDropdown})))}}]),t}(a.a.Component);var qe=Object(m.b)(function(e){var t=e.user,r=e.rides.rides,n=e.forums.forums;return{allCompanies:t.allCompanies,rides:r,forums:t.forums,allForums:n[0],users:t.users,currentUser:t.currentUser}},function(e){return{fetchRides:function(){return e(te())},fetchUsers:function(){return e(Q())}}})(Je),Xe=r(137),Ye=r(539),$e=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",password:""},r.handleChange=function(e){r.setState(Object(he.a)({},e.target.name,e.target.value))},r.handleSubmit=function(){r.props.userLoginFetch(r.state)},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.currentUser&&this.props.history.push("/profile")}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"authBox"},a.a.createElement(Xe.d,null,a.a.createElement(Xe.i,null,a.a.createElement(Xe.c,null,a.a.createElement(Ne.a,{onSubmit:this.handleSubmit},a.a.createElement("h1",null,"Sign in"),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"username",label:"Username",value:this.state.username,onChange:this.handleChange,style:{width:"50%"}})),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{type:"password",name:"password",label:"Password",value:this.state.password,onChange:this.handleChange,style:{width:"50%"}})),a.a.createElement("div",{className:"col text-center mt-4"},a.a.createElement(Ye.a,{styel:{width:"60%"},id:"authbutton",color:"teal",className:"btn btn-primary",type:"submit"},"Login"),a.a.createElement(v.b,{to:"/signup",id:"authbutton",className:"btn btn-primary",color:"teal"},"Sign Up"))),a.a.createElement("div",{className:"text-center mt-4"},a.a.createElement("p",{className:"h5 text-center mb-4"},"  ")))))))}}]),t}(a.a.Component);var Ke=Object(m.b)(function(e){return{currentUser:e.user.currentUser}},function(e){return{userLoginFetch:function(t){return e((r=t,function(e){fetch(F,{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(t){t.errors?alert(t.errors):(localStorage.setItem("jwt",t.jwt),e($(t.user)))})}));var r}}})($e),Qe=r(280),Ze=r(281),et=function(e){var t,r;switch(e.score){case 1:t="red",r="20%";break;case 2:t="orange",r="40%";break;case 3:t="yellow",r="60%";break;case 4:t="#5cff47",r="80%";break;case 5:t="green",r="100%"}var n={backgroundColor:t,height:"5px",width:r,transition:"all 300ms ease-in-out"};return a.a.createElement("div",null,a.a.createElement("p",{className:"pwStrWeak"},"weak"),a.a.createElement("p",{className:"pwStrStrong"},"strong"),a.a.createElement("div",{style:n}))},tt=r(483),rt=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",username:"",password:"",passwordConfirmation:"",btnTxt:"show",type:"password",score:"0",errors:{}},r.handleChange=function(e){r.setState(Object(he.a)({},e.target.name,e.target.value))},r.pwHandleChange=function(e){if(r.setState({password:e.target.value}),""===e.target.value)r.setState(function(e){return Object.assign({},e,{score:"null"})});else{var t=tt(e.target.value);r.setState(function(e){return Object.assign({},e,{score:t.score+1})})}},r.handleSubmit=function(){r.state.password===r.state.passwordConfirmation?r.props.createUser(r.state):alert("Passwords don't match!")},r.pwMask=function(e){e.preventDefault(),r.setState(function(e){return Object.assign({},e,{type:"password"===r.state.type?"input":"password",btnTxt:"show"===r.state.btnTxt?"hide":"show"})})},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.currentUser&&this.props.history.push("/profile")}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"authBox"},a.a.createElement("h1",null,"Sign Up"),a.a.createElement(Ne.a,{className:"col",onSubmit:this.handleSubmit},a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"username",label:"Username",value:this.state.username,onChange:this.handleChange,style:{width:"50%"}})),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{name:"name",label:"Name",value:this.state.name,onChange:this.handleChange,style:{width:"50%"}})),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{type:this.state.type,name:"password",label:"Password",value:this.state.password,onChange:this.pwHandleChange,errorText:this.state.errors.password,style:{width:"50%"}})),a.a.createElement(Qe.a,{id:"pwShowHideBtn",onClick:this.pwMask,icon:Ze.a}),a.a.createElement("div",{className:"pwStrRow"},this.state.score>=1?a.a.createElement("div",null,a.a.createElement(et,{score:this.state.score})):null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Se.a,{type:this.state.type,name:"passwordConfirmation",label:"Confirm Pssword",value:this.state.passwordConfirmation,onChange:this.handleChange,errorText:this.state.errors.pwconfirm,style:{width:"50%"}})),a.a.createElement("br",null),a.a.createElement(Ne.a.Field,null,a.a.createElement(Ye.a,{className:"btn btn-primary",color:"teal",style:{width:"60%"},type:"submit"},"Submit"))),a.a.createElement("br",null),a.a.createElement("p",null," Aleady have an account? ",a.a.createElement("br",null),a.a.createElement(v.b,{to:"/login"},"Login Here!"))))}}]),t}(a.a.Component);var nt=Object(m.b)(function(e){return{currentUser:e.user.currentUser}},function(e){return{createUser:function(t){return e((r=t,function(e){fetch(y,{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(t){t.error?alert(t.error):(localStorage.setItem("jwt",t.jwt),e($(t.user)))})}));var r}}})(rt),at=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderMessages=function(e){if(r.props.users)return e.map(function(e,t){var n=r.props.users.find(function(t){return t.id===e.user_id}).name;return a.a.createElement("div",{key:t,className:"incoming_msg"},a.a.createElement("div",{className:"incoming_msg_img"}," ",a.a.createElement("img",{src:"https://ptetutorials.com/images/user-profile.png",alt:"sunil"})," "),a.a.createElement("div",{className:"received_msg"},a.a.createElement("div",{className:"received_withd_msg"},a.a.createElement("p",null,e.content),a.a.createElement("span",{className:"time_date"},"  ",n||"NotFound","   |  ",e.created_at,"  "))))})},r.handleClose=function(){r.props.resetMessages(),r.props.closeChat()},r.handleInput=function(e){r.setState({formInput:e.target.value})},r.handleMessageSubmit=function(){r.props.postNewMessage(r.props.currentUser,r.state.formInput,r.state.currentChat),r.setState({formInput:""})},r.addNewMessage=function(e){var t=[].concat(Object(fe.a)(r.state.messages),[e]);r.setState({messages:t,formInput:""})},r.state={formInput:"",currentUser:r.props.currentUser,currentChat:r.props.currentChat,messages:[]},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers(),this.setState({messages:this.props.messages})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({messages:e.messages})}},{key:"render",value:function(){var e=this;return a.a.createElement(n.Fragment,null,a.a.createElement("div",{id:"chatbox"},a.a.createElement("h3",{className:" text-center"},this.props.currentChat?this.props.currentChat.topic:null," Messaging"),a.a.createElement("div",{className:"messaging"},a.a.createElement("div",{className:"inbox_msg"},a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.handleClose()}},"Close Chat"),a.a.createElement("div",{className:"headind_srch"})),a.a.createElement("div",{className:"mesgs"},a.a.createElement("div",{className:"msg_history"},this.renderMessages(this.props.messages)),a.a.createElement("div",{className:"type_msg"},a.a.createElement("div",{className:"input_msg_write"},a.a.createElement("input",{type:"text",className:"write_msg",placeholder:"Type a message",value:this.state.formInput,onChange:function(t){return e.handleInput(t)}}),a.a.createElement("button",{className:"msg_send_btn",type:"button",onClick:function(){return e.handleMessageSubmit()}},a.a.createElement("i",{className:"fa fa-paper-plane-o","aria-hidden":"true"}),"Send!"))))),a.a.createElement("p",{className:"text-center top_spac"}," Design by ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://brianjmurillo.com"},"Brian Murillo")))))}}]),t}(n.Component);var st=Object(m.b)(function(e){var t=e.user,r=e.forums;return{users:t.users,messages:r.messages}},function(e){return{fetchUsers:function(){return e(Q())},fetchForumMessages:function(t){return e(re(t))},postNewMessage:function(t,r,n){return e(oe(t,r,n))},resetMessages:function(){return e({type:Y,payload:t});var t}}})(at),lt=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleForumClick=function(e,t){var n=r.props.forums.find(function(e){return e.topic===t});n&&r.props.fetchForumMessages(n),r.setState({clickedForum:t,openChat:!0})},r.closeChat=function(){r.setState({openChat:!1})},r.renderPage=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"forum-list"},a.a.createElement("h3",null,"Click on a Forum To Chat"),r.state.openChat?a.a.createElement(st,{currentUser:r.props.currentUser,closeChat:r.closeChat,currentChat:r.props.forums.find(function(e){return e.topic===r.state.clickedForum})}):a.a.createElement(we,{handleForumClick:r.handleForumClick,forums:r.props.allForums})))},r.state={allForums:null,clickedForum:null,openChat:!1},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchForums(),this.props.fetchUsers()}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},this.props.currentUser?this.renderPage():a.a.createElement(De,null))}}]),t}(a.a.Component);var ot=Object(m.b)(function(e){var t=e.user,r=e.forums.forums;return{allCompanies:t.allCompanies,rides:t.rides,forums:r[0],allForums:r[0],users:t.users,currentUser:t.currentUser}},function(e){return{fetchUsers:function(){return e(Q())},fetchForums:function(){return e(ne())},fetchForumMessages:function(t){return e(re(t))}}})(lt),it=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"renderFriendsBox",value:function(){var e=this;return this.props.currentUser?a.a.createElement(a.a.Fragment,null,a.a.createElement(Me,{followers:this.props.users.filter(function(t){return t.id!==e.props.currentUser.id})})):a.a.createElement(a.a.Fragment,null,a.a.createElement(Me,{followers:this.props.users}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{id:"discoverpage"},this.props.users?this.renderFriendsBox():a.a.createElement("div",{className:"authBox"},a.a.createElement("h3",null,"Loading.."))))}}]),t}(a.a.Component);var ct=Object(m.b)(function(e){var t=e.user;return{users:t.users,currentUser:t.currentUser}},function(e){return{fetchUsers:function(){return e(Q())}}})(it),ut=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(r=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).renderUserPage=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.b,{path:"/users/:id",exact:!0,render:function(e){var t=parseInt(e.match.params.id);if(r.props.currentUser&&t!==r.props.currentUser.id){var n=r.props.users.find(function(e){return e.id===t});return a.a.createElement(He,Object.assign({},e,{allCompanies:r.props.allCompanies,currentUser:r.props.currentUser,user:n}))}}}))},r.renderPage=function(e){var t=parseInt(e.match.params.id);if(r.props.currentUser){if(t!==r.props.currentUser.id&&r.props.users){var n=r.props.users.find(function(e){return e.id===t});return r.props.fetchUser(n),a.a.createElement(He,Object.assign({},e,{allCompanies:r.props.allCompanies,isCurrentUserProfile:!1,currentUser:r.props.currentUser,user:n}))}}else if(r.props.users)return a.a.createElement(De,null)},r.renderProfileRoute=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.b,{path:"/users/:id",exact:!0,render:function(e){var t=parseInt(e.match.params.id);if(r.props.currentUser){if(t!==r.props.currentUser.id){var n=r.props.users.find(function(e){return e.id===t});return a.a.createElement(He,Object.assign({},e,{allCompanies:r.props.allCompanies,currentUser:r.props.currentUser,user:n}))}return a.a.createElement(He,Object.assign({},e,{allCompanies:r.props.allCompanies,currentUser:r.props.currentUser,user:r.props.currentUser}))}}}))},r}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getProfileFetch(),this.props.fetchRides(),this.props.fetchUsers(),this.props.fetchForums()}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,null,a.a.createElement(me,{history:this.props.history,currentUser:this.props.currentUser}),a.a.createElement(f.a.Row,{centered:!0},a.a.createElement(d.d,null,a.a.createElement(d.b,{path:"/login",render:function(t){return a.a.createElement(Ke,Object.assign({},t,{setCurrentUser:e.props.setCurrentUser}))}}),a.a.createElement(d.b,{path:"/profile",render:function(t){return e.props.currentUser?(e.props.fetchUser(e.props.currentUser),a.a.createElement(He,Object.assign({},t,{allCompanies:e.props.allCompanies,isCurrentUserProfile:!1,currentUser:e.props.currentUser,user:e.props.currentUser}))):a.a.createElement(d.b,{path:"/"})}}),a.a.createElement(d.b,{path:"/user/:id",render:function(t){return e.renderPage(t)}}),a.a.createElement(d.b,{path:"/discover",component:ct}),a.a.createElement(d.b,{path:"/forums",component:ot}),a.a.createElement(d.b,{path:"/rides",component:qe}),a.a.createElement(d.b,{path:"/signup",render:function(t){return a.a.createElement(nt,Object.assign({},t,{setCurrentUser:e.props.setCurrentUser}))}}),this.props.currentUser?a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{from:"/user/"+this.props.currentUser.id,to:"/profile"}),a.a.createElement(d.a,{from:"*",to:"/profile"})):a.a.createElement(d.a,{from:"*",to:"/login"})))))}}]),t}(a.a.Component);var pt=Object(m.b)(function(e){var t=e.user,r=e.rides.rides,n=e.forums.forums;return{allCompanies:t.allCompanies,rides:r,forums:n[0],allForums:n[0],users:t.users,currentUser:t.currentUser}},function(e){return{getProfileFetch:function(){return e(function(e){var t=localStorage.getItem("jwt");t&&fetch(N,{headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){t.errors?(alert(t.errors),localStorage.removeItem("jwt")):e($(t))})})},setLogout:function(){return e(ue())},fetchRides:function(){return e(te())},fetchForums:function(){return e(ne())},fetchUsers:function(){return e(Q())},fetchCompanies:function(){return e(ee())},fetchUser:function(t){return e(Z(t))}}})(ut);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var dt=r(104),mt=r(282),ft={users:[],allCompanies:[],forums:[],rides:[],allForums:[],friendships:[],followers:[],following:[],userProfile:null,currentUser:null};var ht={forums:[],messages:[]};var gt={rides:[]};var Et=Object(dt.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(ge.a)({},e,{users:[].concat(Object(fe.a)(e.users),[t.payload])});case"RESET":return ft;case I:return Object(ge.a)({},e,{allCompanies:t.payload});case _:return Object(ge.a)({},e,{currentUser:t.payload});case V:return Object(ge.a)({},e,{users:t.payload});case L:return Object(ge.a)({},e,{currentUser:Object(ge.a)({},e.currentUser,{followers:[].concat(Object(fe.a)(e.currentUser.followers),[t.payload])})});case x:var r=e.currentUser.followers.filter(function(e){return e.id!==t.payload.id});return Object(ge.a)({},e,{currentUser:Object(ge.a)({},e.currentUser,{followers:r})});case q:return Object(ge.a)({},e,{following:t.payload});case P:return Object(ge.a)({},e,{currentUser:Object(ge.a)({},e.currentUser,{following:[].concat(Object(fe.a)(e.currentUser.following),[t.payload])})});case A:var n=e.currentUser.following.filter(function(e){return e.id!==t.payload.id});return Object(ge.a)({},e,{currentUser:Object(ge.a)({},e.currentUser,{following:n})});case R:return Object(ge.a)({},e,{currentUser:null});case W:return Object(ge.a)({},e,{userProfile:t.payload});case z:return Object(ge.a)({},e,{friendships:t.payload});case J:return Object(ge.a)({},e,{friendships:[].concat(Object(fe.a)(e.friendships),[t.payload])});case G:var a=e.friendships.filter(function(e){return e.id!==t.payload.id});return Object(ge.a)({},e,{friendships:a});default:return e}},rides:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(ge.a)({},e,{rides:t.payload});case M:return Object(ge.a)({},e,{rides:[].concat(Object(fe.a)(e.rides),[t.payload])});default:return e}},forums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(ge.a)({},e,{forums:[].concat(Object(fe.a)(e.forums),[t.payload])});case X:return Object(ge.a)({},e,{messages:[].concat(Object(fe.a)(e.messages),[t.payload])});case H:return Object(ge.a)({},e,{messages:t.payload});case Y:return Object(ge.a)({},e,{messages:[]});default:return e}},routing:mt.routerReducer}),bt=r(283),vt=Object(dt.c)(Et,Object(dt.a)(bt.a));l.a.render(a.a.createElement(m.a,{store:vt},a.a.createElement(v.a,null,a.a.createElement(d.b,{path:"/",component:pt}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[301,1,2]]]);
//# sourceMappingURL=main.93f24033.chunk.js.map